generator client {
  provider = "prisma-client-js"
}

datasource db {
  provider = "mysql"
  url      = env("DATABASE_URL")
}

model cliente {
  id              Int      @id @default(autoincrement()) @db.UnsignedInt
  cpf             String   @unique(map: "cpf_UNIQUE") @db.Char(11)
  nomeCompleto    String   @db.VarChar(45)
  acompanhante    String?  @db.VarChar(45)
  acompanha       String?  @db.VarChar(45)
  deficiencia     String?  @db.VarChar(45)
  email           String   @db.VarChar(100)
  nascimento      DateTime @db.Date
  senha           String   @db.VarChar(45)
  numeroTel       BigInt
  tipoCarteirinha String   @db.VarChar(45)
  saldo           Decimal? @default(0.00) @db.Decimal(10, 2)
}

model linha {
  id           Int      @id @db.UnsignedInt
  nome         String   @db.VarChar(45)
  localSaida   String   @db.VarChar(45)
  localDestino String   @db.VarChar(45)
  horaSaida    DateTime @db.Time(0)
  horaChegada  DateTime @db.Time(0)
}

model motorista {
  id           Int      @id @default(autoincrement()) @db.UnsignedInt
  cpf          String   @unique(map: "cpf_UNIQUE") @db.Char(11)
  nomeCompleto String   @db.VarChar(45)
  email        String   @db.VarChar(100)
  nascimento   DateTime @db.Date
  numeroTel    BigInt
}

model motorista_onibus {
  id             Int      @db.UnsignedInt
  data           DateTime @db.DateTime(0)
  onibus_numero1 Int      @db.UnsignedInt
  motorista_id   Int      @db.UnsignedInt

  @@id([id, onibus_numero1, motorista_id])
  @@index([motorista_id], map: "fk_motorista_onibus_motorista1_idx")
  @@index([onibus_numero1], map: "fk_motorista_onibus_onibus2_idx")
}

model onibus {
  numero   Int    @default(autoincrement()) @db.UnsignedInt
  placa    String @unique(map: "placa_UNIQUE") @db.Char(7)
  linha_id Int    @db.UnsignedInt

  @@id([numero, linha_id])
  @@index([linha_id], map: "fk_onibus_linha1_idx")
}

model viagem {
  id              Int      @default(autoincrement()) @db.UnsignedInt
  data            DateTime @db.DateTime(0)
  linha_id        Int      @db.UnsignedInt
  onibus_numero   Int      @db.UnsignedInt
  onibus_linha_id Int      @db.UnsignedInt
  motorista_id    Int      @db.UnsignedInt

  @@id([id, linha_id, onibus_numero, onibus_linha_id, motorista_id])
  @@index([linha_id], map: "fk_viagem_linha1_idx")
  @@index([motorista_id], map: "fk_viagem_motorista1_idx")
  @@index([onibus_numero, onibus_linha_id], map: "fk_viagem_onibus1_idx")
}

model viagem_has_cliente {
  viagem_id  Int      @db.UnsignedInt
  cliente_id Int      @db.UnsignedInt
  tarifa     Decimal  @db.Decimal(10, 2)
  data       DateTime @db.DateTime(0)

  @@id([viagem_id, cliente_id])
  @@index([cliente_id], map: "fk_viagem_has_cliente_cliente1_idx")
  @@index([viagem_id], map: "fk_viagem_has_cliente_viagem1_idx")
}
